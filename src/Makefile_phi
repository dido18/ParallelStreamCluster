## Makefile for streamcluster project on xeon phi


#FF_ROOT     pointing to the FastFlow root directory (i.e. the one containing the ff directory
FF_ROOT         = $(HOME)/fastflow


# prefix of the project directory
#PREFIX          = /home/dido-ubuntu/github/ParallelStreamCluster

#Xeon phi - icc compiler
CXX 		= icpc -std=c++11  -DNO_DEFAULT_MAPPING

INCLUDES	= -I $(FF_ROOT)
CXXFLAGS  	=  -mmic  

LDFLAGS 	= -pthread

OPTFLAGS	= -O3           # -finline-functions -DNDEBUG  #-DPRINTINFO

TARGETS		= ff_stream_cluster ff_stream_cluster_noFarm

.PHONY:  all clean cleanall
.SUFFIXES: .cpp

% :%.cpp 
	$(CXX) $(CXXFLAGS) $(INCLUDES) $(OPTFLAGS) -o $@ $< $(LDFLAGS)

all : $(TARGETS) 

clean	:
	rm -f $(TARGETS)

cleanall : clean
	\rm -f *.o *~

install:
	mkdir -p ../bin
	mv -f $(TARGETS) ../bin/
